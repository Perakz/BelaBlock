from tkinter import *
import tkinter.font as font
from PIL import ImageTk, Image
import os

ukupnibodovi1 = 0
ukupnibodovi2 = 0


def new(event1):
    newprozor = Toplevel(main)
    newprozor.geometry("500x600+1170+0")
    newprozor.title("Nova igra")
    newprozor.resizable(False, False)
    NewFont2 = font.Font(family="Helvatica", size=20)
    Label(newprozor, font=NewFont2, text='IME IGRE:').pack()
    unosimenaigre = Entry(newprozor, font=NewFont2)
    unosimenaigre.pack()
    Label(newprozor, text=" ").pack()
    Label(newprozor, font=NewFont2, text='TEAM 1:').pack()
    imeprvogclanatima1 = Entry(newprozor, font=NewFont2)
    imeprvogclanatima1.pack()
    Label(newprozor, text=" ").pack()
    imedrugogclanatima1 = Entry(newprozor, font=NewFont2)
    imedrugogclanatima1.pack()
    Label(newprozor, text=" ").pack()
    Label(newprozor, font=NewFont2, text='TEAM 2:').pack()
    imeprvogclanatima2 = Entry(newprozor, font=NewFont2)
    imeprvogclanatima2.pack()
    Label(newprozor, text=" ").pack()
    imedrugogclanatima2 = Entry(newprozor, font=NewFont2)
    imedrugogclanatima2.pack()
    Label(newprozor, text=" ").pack()
    Label(newprozor, font=NewFont2, text="BODOVNI PRAG:").pack()
    bodovni = Entry(newprozor, font=NewFont2)
    bodovni.pack()

    def create(event2):
        global file_name
        a = unosimenaigre.get()
        save_path = "C:/Users/Windows/PycharmProjects/Bela/GamesBela"
        file_name = os.path.join(save_path, a + ".txt")
        file = open(file_name, "w")
        b = imeprvogclanatima1.get()
        c = imedrugogclanatima1.get()
        d = imeprvogclanatima2.get()
        e = imedrugogclanatima2.get()
        bp = bodovni.get()
        bpint = int(bp)
        file.write(a)
        file.write("\n")
        file.write(b)
        file.write("\n")
        file.write(c)
        file.write("\n")
        file.write(d)
        file.write("\n")
        file.write(e)
        file.write("\n")
        file.write(bp)
        file.write("\n")
        file.close()
        igra1 = Toplevel(newprozor)
        igra1.geometry("500x600+1170+0")
        igra1.title("" + a)
        igra1.resizable(False, False)

        def unos(event214):
            unosv = Toplevel(igra1)
            unosv.geometry("500x600+1170+0")
            unosv.title("Unos")
            Unosvfont = font.Font(family="Helvatica", size=25)
            Label(unosv, font=Unosvfont, text="Broj bodova (TEAM 1)").pack()
            Label(unosv, font=Unosvfont).pack()
            brojbodova1team = Entry(unosv, font=NewFont2)
            brojbodova1team.pack()
            Label(unosv, font=Unosvfont, text="").pack()
            Label(unosv, font=Unosvfont, text="Zvanje (TEAM 1)").pack()
            Label(unosv, font=Unosvfont).pack()
            zvanje1team = Entry(unosv, font=NewFont2)
            zvanje1team.pack()
            Label(unosv, font=Unosvfont, text="").pack()
            Label(unosv, font=Unosvfont, text="Zvanje (TEAM 2)").pack()
            Label(unosv, font=Unosvfont).pack()
            zvanje2team = Entry(unosv, font=NewFont2)
            zvanje2team.pack()

            def labelcreation(event123425):
                global ukupnibodovi1
                global ukupnibodovi2
                f = brojbodova1team.get()
                fint = int(f)
                #file2 = open(file_name, "a")
                #file2.write(str(f))
                #file2.close()
                zvanje1teama = zvanje1team.get()
                zvanje1teamaint = int(zvanje1teama)
                zvanje2teama = zvanje2team.get()
                zvanje2teamaint = int(zvanje2teama)
                gint = 162 - fint
                fuk = fint + zvanje1teamaint
                guk = gint + zvanje2teamaint
                Label(igra1, font=Unosvfont, text="" + str(fuk) + "                     "+str(guk)).pack()
                unosv.destroy()
                unosv.update()
                ukupnibodovi1 = ukupnibodovi1 + fuk
                ukupnibodovi2 = ukupnibodovi2 + guk
                ukupnibodovi.config(text="" + str(ukupnibodovi1) + "                     "+str(ukupnibodovi2))
                if ukupnibodovi1 >= bpint or ukupnibodovi2 >= bpint:
                    if ukupnibodovi1 >= bpint:
                        if ukupnibodovi1 >= bpint and ukupnibodovi2 >= bpint:
                            max = ukupnibodovi1
                            if ukupnibodovi2 >= max:
                                rezultat_timovi.config(text="TEAM 2 JE POBJEDNIK!")
                        else:
                            rezultat_timovi.config(text="TEAM 1 JE POBJEDNIK!")
                    if ukupnibodovi2 >= bpint:
                        if ukupnibodovi1 >= bpint and ukupnibodovi2 >= bpint:
                            max = ukupnibodovi2
                            if ukupnibodovi1 >= max:
                                rezultat_timovi.config(text="TEAM 1 JE POBJEDNIK!")
                        else:
                            rezultat_timovi.config(text="TEAM 2 JE POBJEDNIK!")
                return
            unesigame = Button(unosv, text="UNESI")
            unesigame.bind("<Button>", labelcreation)
            unesigame.pack()
            unesigame["font"] = Unosvfont
            unesigame.pack()
            unesigame.config(bg="red")
            unesigame.place(y=500, height=100, width=500)
            unosv.mainloop()
            return

        global ukupnibodovi1
        global ukupnibodovi2
        font1234 = font.Font(family="Helvatica", size=25)
        ukupnibodovi = Label(igra1, font=font1234, text="" + str(ukupnibodovi1) + "                          " + str(ukupnibodovi2))
        ukupnibodovi.place(y=420, height=50, width=500)
        ukupnibodovi.config(bg="green")
        noviunos = Button(igra1, text="NOVI UNOS")
        noviunos.bind("<Button>", unos)
        noviunos["font"] = NewFont3
        noviunos.pack()
        noviunos.config(bg="red")
        noviunos.place(y=470, height=100, width=500)
        rezultat = Label(igra1, text="REZULTAT:" + a)
        rezultat["font"] = NewFont2
        rezultat.pack()
        rezultat_timovi = Label(igra1, text="TEAM 1.                   TEAM 2.")
        rezultat_timovi["font"] = NewFont2
        rezultat_timovi.pack()
        igra1.mainloop()
        return

    creategame = Button(newprozor, text="CREATE GAME")
    NewFont3 = font.Font(family="Helvatica", size=50)
    creategame.bind("<Button>", create)
    creategame["font"] = NewFont3
    creategame.pack()
    creategame.config(bg="red")
    creategame.place(y=500, height=100, width=500)
    newprozor.mainloop()
    return


def load(event5):
    loadp = Toplevel(main)
    loadp.geometry("500x600+1170+0")
    loadp.title("Load")
    Loadfont = font.Font(family="Helvatica", size=20)
    Label(loadp, font=Loadfont, text='IME IGRE:').pack()
    arr = os.listdir("C:/Users/Windows/PycharmProjects/Bela/GamesBela/")
    listlen = len(arr)
#  Buttonsss = []
#   for i in range(listlen):
#        Buttonsss.append(Button(main, text=""+arr[i], command=lambda i=i: Buttonsss.open_this(i)))
    loadp.mainloop()

# Glavni prozor
main = Tk()
main.geometry("500x700+1170+0")
main.resizable(False, False)
main.title("Bela Blok")
praznina = Label(main, text=" \n \n \n \n").pack()

# Glavna slika
glavnaslika = Canvas(main, width=300, height=300)
glavnaslika.pack()
img = ImageTk.PhotoImage(Image.open("Bela2.png"))
glavnaslika.create_image(150, 100, image=img)

# New-gumb
NewFont = font.Font(family="Helvatica", size=50)
newgame = Button(main, text="NEW GAME")
newgame.bind("<Button>", new)
newgame["font"] = NewFont
newgame.pack()
newgame.config(bg="red")
newgame.place(y=400, height=100, width=500)

# Load-gumb
NewFont = font.Font(family="Helvatica", size=50)
loadgame = Button(main, text="LOAD GAME")
loadgame.bind("<Button>", load)
loadgame["font"] = NewFont
loadgame.pack()
loadgame.config(bg="green")
loadgame.place(y=550, height=100, width=500)

main.mainloop()
